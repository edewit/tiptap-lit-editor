<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TipTap Lit Editor Demo</title>
    <style>
        * {
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 2rem;
            background: #f5f5f5;
            min-height: 100vh;
        }

        .demo-container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .demo-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .demo-header h1 {
            margin: 0 0 0.5rem;
            font-size: 2rem;
            color: #1976d2;
        }

        .demo-header p {
            margin: 0;
            color: #666;
        }

        .demo-controls {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
            align-items: center;
        }

        .demo-controls label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
        }

        .demo-controls button {
            padding: 0.5rem 1rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            background: white;
            cursor: pointer;
            font-size: 0.875rem;
        }

        .demo-controls button:hover {
            background: #f0f0f0;
        }

        .demo-controls button.primary {
            background: #1976d2;
            color: white;
            border-color: #1976d2;
        }

        .demo-controls button.primary:hover {
            background: #1565c0;
        }

        .editor-wrapper {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        tiptap-editor {
            height: 400px;
        }

        .output-section {
            margin-top: 2rem;
        }

        .output-section h3 {
            margin: 0 0 0.5rem;
        }

        .output-content {
            background: white;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 1rem;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.875rem;
            white-space: pre-wrap;
            word-break: break-all;
            max-height: 300px;
            overflow-y: auto;
        }

        .tabs {
            display: flex;
            gap: 0.25rem;
            margin-bottom: 0.5rem;
        }

        .tabs button {
            padding: 0.5rem 1rem;
            border: 1px solid #ddd;
            border-radius: 4px 4px 0 0;
            background: #f5f5f5;
            cursor: pointer;
            font-size: 0.875rem;
            border-bottom: none;
        }

        .tabs button.active {
            background: white;
            border-bottom: 1px solid white;
            margin-bottom: -1px;
        }
    </style>
</head>
<body>
    <div class="demo-container">
        <div class="demo-header">
            <h1>TipTap Lit Editor</h1>
            <p>A rich text editor built with TipTap and Lit components</p>
        </div>

        <div class="demo-controls">
            <label>
                <input type="checkbox" id="markdown-toggle" checked>
                Markdown Mode
            </label>
            <button id="get-content">Get Content</button>
            <button id="clear-content">Clear</button>
            <button id="set-sample" class="primary">Load Sample</button>
        </div>

        <div class="editor-wrapper">
            <tiptap-editor id="editor" markdown></tiptap-editor>
        </div>

        <div class="output-section">
            <div class="tabs">
                <button class="active" data-tab="output">Output</button>
                <button data-tab="html">HTML</button>
            </div>
            <div class="output-content" id="output">
                <em>Click "Get Content" to see the editor output</em>
            </div>
        </div>
    </div>

    <script type="module">
        import { TipTapEditor } from '../src/index.ts';

        const editor = document.getElementById('editor');
        const output = document.getElementById('output');
        const markdownToggle = document.getElementById('markdown-toggle');

        // Sample content
        const sampleMarkdown = `# Welcome to TipTap Lit Editor

This is a **rich text editor** built with [TipTap](https://tiptap.dev/) and [Lit](https://lit.dev/).

## Features

- **Bold** and *italic* text formatting
- [Links](https://example.com) and images
- Headings (H1-H6)
- Bullet and numbered lists
- Code blocks with syntax highlighting
- Tables
- Drag and drop reordering

## Try It Out

1. Select some text to see the bubble menu
2. Hover on the left edge to see the gutter menu
3. Click the "+" button to add new blocks

### Code Example

\`\`\`javascript
function hello() {
    console.log('Hello, World!');
}
\`\`\`

| Feature | Status |
|---------|--------|
| Bold | ✅ |
| Italic | ✅ |
| Links | ✅ |
| Images | ✅ |
| Tables | ✅ |

---

Start editing to see the magic! ✨
`;

        const sampleHtml = `<h1>Welcome to TipTap Lit Editor</h1>
<p>This is a <strong>rich text editor</strong> built with <a href="https://tiptap.dev/">TipTap</a> and <a href="https://lit.dev/">Lit</a>.</p>
<h2>Features</h2>
<ul>
<li><strong>Bold</strong> and <em>italic</em> text formatting</li>
<li>Links and images</li>
<li>Headings (H1-H6)</li>
<li>Bullet and numbered lists</li>
</ul>
<p>Start editing to see the magic! ✨</p>`;

        // Toggle markdown mode
        markdownToggle.addEventListener('change', (e) => {
            const isMarkdown = e.target.checked;
            if (isMarkdown) {
                editor.setAttribute('markdown', '');
            } else {
                editor.removeAttribute('markdown');
            }
            // Reload with appropriate sample
            editor.setContent(isMarkdown ? sampleMarkdown : sampleHtml);
        });

        // Get content button
        document.getElementById('get-content').addEventListener('click', () => {
            const content = editor.getContent();
            output.textContent = content;
        });

        // Clear button
        document.getElementById('clear-content').addEventListener('click', () => {
            editor.setContent('');
            output.innerHTML = '<em>Editor cleared</em>';
        });

        // Load sample button
        document.getElementById('set-sample').addEventListener('click', () => {
            const isMarkdown = markdownToggle.checked;
            editor.setContent(isMarkdown ? sampleMarkdown : sampleHtml);
            output.innerHTML = '<em>Sample content loaded</em>';
        });

        // Tab switching
        document.querySelectorAll('.tabs button').forEach(btn => {
            btn.addEventListener('click', (e) => {
                document.querySelectorAll('.tabs button').forEach(b => b.classList.remove('active'));
                e.target.classList.add('active');
                
                const tab = e.target.dataset.tab;
                if (tab === 'html') {
                    const tiptapEditor = editor.getEditor();
                    if (tiptapEditor) {
                        output.textContent = tiptapEditor.getHTML();
                    }
                } else {
                    output.innerHTML = '<em>Click "Get Content" to see the editor output</em>';
                }
            });
        });

        // Listen for content changes
        editor.addEventListener('content-changed', (e) => {
            console.log('Content changed:', e.detail.content.substring(0, 100) + '...');
        });

        // Load sample content initially
        setTimeout(() => {
            editor.setContent(sampleMarkdown);
        }, 100);
    </script>
</body>
</html>

